<div class="bg-blend-hue dark:text-white text-gray-800 mx-auto max-w-6xl sm:px-8 lg:px-12 sm:py-2 lg:py-4 lg:rounded-lg md:rounded-md rounded-none h-full flex flex-col justify-between">
    <div class="flex flex-col w-full gap-4 p-2">
        <div class="flex items-center justify-between">
            <h3 class="text-2xl dark:text-slate-200 text-slate-800 font-bold ml-3 md:w-max w-8">Próximos agendamentos</h3>
            <p-dropdown placeholder="Tempo" [options]="dateRanges" [formControl]="dateRange" (onChange)="onChangeDateRange($event)"></p-dropdown>
        </div>

        <ol *ngIf="events.length; else noneEvent">
            <li [class]="'border-l-2 border-purple-600 ml-4 '" *ngFor="let event of events" [style]="{'border-color': event.employee.color ?? 'rgb(147 51 234)'}">
                <div class="md:flex flex-start">
                    <div [class]="'bg-purple-600 w-6 h-6 flex items-center justify-center rounded-full -ml-3.5 p-0.5 shadow-base-medium shadow-md'" [style]="{background: event.employee.color ?? 'rgb(147 51 234)'}">
                        <fa-icon [icon]="faCalendar"></fa-icon>
                    </div>
                    <div class="block rounded-lg bg-gray-100 w-90% ml-6 mb-0.5">
                        <div class="md:p-6 p-3 rounded-t-lg shadow-lg md:w-full">
                            <div class="flex justify-between mb-2">
                                <p>
                                    <span class="font-semibold text-xl text-slate-900"> {{event.customer.name}} </span><br>
                                    <span class="font-light text-lg italic text-slate-700">{{event.schedule.service.description}}</span>
                                </p>
                                <p>
                                    <span class="font-medium md:text-xl text-base text-slate-900">{{event.schedule.startDateTime | date: "dd/MM/yy HH:mm"}}</span><br>
                                    <span class="font-light md:text-base text-sm italic text-slate-700 float-right"> {{getDayName(event.schedule.startDateTime)}}</span>
                                </p>
                            </div>
                            <p class="text-gray-700 mb-6" *ngIf="event.schedule.note || event.schedule.service.note"> {{event.schedule.note}} </p>
    
                        </div>
                        <div class="p-2 rounded-b-lg shadow-lg  md:w-full">
                            <div class="flex justify-end">
                                <button pButton class="p-button-sm" (click)="showCalendar($event, op, event)">Abrir agenda</button>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
        </ol>

        <p-overlayPanel [showCloseIcon]="true" #op  (onHide)="calendarOpen = false" [style]="{width: getWidth()}" styleClass="responsive-overlay">
            <div class="w-full sm:w-75 md:w-50 lg:w-25" *ngIf="calendarOpen">
                <app-calendar [header]="false" [events]="eventsCalendar" [isEditable]="false"></app-calendar>            
            </div>
        </p-overlayPanel>

        <ng-template #noneEvent>
            <div class="text-center font-semibold text-lg">Nenhum agendamento para esse período</div>
        </ng-template>
    </div>
    <p class="text-base leading-1 font-medium text-center px-4">
        Deseja visualizar agendamentos passados ou mais distantes? Veja direto na <a class="text-purple-400 cursor-pointer no-underline appearance-none select-none" routerLink="/scheduler">Agenda</a>
    </p>
</div>